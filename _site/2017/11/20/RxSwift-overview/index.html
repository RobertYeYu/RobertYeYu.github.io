<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>RxSwiftç®€ä»‹ - ä½ çš„åšå®¢ | Shit Happens</title>

    <link rel="canonical" href="http://lucida.top/2017/11/20/RxSwift-overview/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="http://cdn.staticfile.org/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Shit Happens</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    <li>
                        <a href="/tags/">Tags</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post-bg-2015.jpg" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/post-bg-2015.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#RxSwift" title="RxSwift">RxSwift</a>
                        
                        <a class="tag" href="/tags/#è¯»ä¹¦ç¬”è®°" title="è¯»ä¹¦ç¬”è®°">è¯»ä¹¦ç¬”è®°</a>
                        
                    </div>
                    <h1>RxSwiftç®€ä»‹</h1>
                    
                    
                    <h2 class="subheading"> "åˆæ¢RxSwift"</h2>
                    
                    <span class="meta">Posted by RobertYeYu on November 20, 2017</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

				<blockquote>
  <p>â€œDonâ€™t worry, Be happy â€</p>
</blockquote>

<h2 id="section">åºŸè¯</h2>
<p>ç»ˆäºä¸‹å®šå†³å¿ƒå†™ä¸€äº›ä¸œè¥¿ï¼Œå› ä¸ºæœ€è¿‘æ€»æ„Ÿè§‰ï¼Œæœ‰ä¸€äº›ä¸œè¥¿å°±åœ¨å˜´è¾¹ï¼Œå´æ€ä¹ˆä¹Ÿæƒ³ä¸èµ·æ¥ã€‚æ‰€ä»¥è¿˜æ˜¯å¾—è®°ä¸‹æ¥ã€‚çƒ‚ç¬”å¤´å°±è¿™æ ·ç”¨èµ·æ¥å§ã€‚</p>

<h2 id="rxswift">RxSwiftæ¦‚è§ˆ</h2>

<blockquote>
  <p>RxSwift is a library for composing asynchronous and event-based code by using observable sequences and functional style operators, allowing for parameterized execution via schedulers.</p>
</blockquote>

<p>Whatï¼ï¼ï¼
æœ¬æ¥æˆ‘æƒ³ç¿»è¯‘ä¸€ä¸‹è¿™å¥å®˜æ–¹å®šä¹‰ï¼Œä½†è¿˜æ˜¯ç®—äº†ã€‚ä½†æ„¿æœ‰ä¸€å¤©æˆ‘èƒ½ä¿¡å¿ƒæ»¡æ»¡çš„æ¥ç¿»è¯‘è¿™ä¸€å¥è¯ã€‚ä½†æ˜¯ï¼Œè¿˜æ˜¯æœ‰å‡ ä¸ªç‚¹å€¼å¾—ä¸€çœ‹ã€‚</p>

<ul>
  <li>asynchronous å¼‚æ­¥</li>
  <li>event-based	 åŸºäºäº‹ä»¶</li>
  <li>observable sequences è¿™ä¸ªæ€ä¹ˆè¯´å‘¢ï¼Œåæ­£ä¸€åˆ‡éƒ½æ˜¯sequences</li>
  <li>functional å‡½æ•°å¼çš„</li>
</ul>

<p>æ˜¯ä¸æ˜¯å¾ˆfashionï¼Œå‡ ä¹æ¯ä¸ªç‚¹éƒ½æ˜¯å½“ä¸‹æµè¡Œçš„ä¸€æœ¬ä¹¦äº†</p>

<h2 id="section-1">å¼‚æ­¥</h2>
<p>åœ¨appä¸­ï¼Œåœ¨ä»»ä¸€æ—¶åˆ»å¾ˆå¤šäº‹æƒ…ä¼šåŒæ—¶å‘ç”Ÿï¼Œä¸‹è½½æ–‡ä»¶ï¼Œåˆ·æ–°ç•Œé¢ï¼Œå‘ç£ç›˜å†™å…¥ï¼Œç­‰ç­‰â€¦
Cocoaå’ŒUIKitä¸­æœ‰å¾ˆå¤šå¼‚æ­¥API:</p>

<ul>
  <li>NotificationCenter: é€šçŸ¥</li>
  <li>The delegate pattern: ä»£ç†æ¨¡å¼åŸºæœ¬æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€ç§æ•°æ®å›ä¼ æ–¹å¼</li>
  <li>Grand Central Dispatch: GCDå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠä¸šåŠ¡é€»è¾‘æŠ½è±¡å‡ºæ¥ã€‚å¯ä»¥æŠŠå°†è¿™äº›ä»£ç é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§ä¼˜å…ˆçº§åœ¨ä¸åŒçš„é˜Ÿåˆ—ä¸Šå¹¶è¡Œæ‰§è¡Œ</li>
  <li>Closures: é—­åŒ…å¯ä»¥è®©ä½ æŠŠä¸€æ®µä»£ç å’Œä¸Šä¸‹æ–‡çš„å‚æ•°ä¼ é€’ç»™åˆ«çš„ç±»ï¼Œé‚£æ ·ï¼Œæ¥æ”¶åˆ°é—­åŒ…çš„ç±»å°±å¯ä»¥å†³å®šæ˜¯å¦è¦æ‰§è¡Œè¿™ä¸€æ®µä»£ç ï¼Œæ‰§è¡Œå¤šå°‘æ¬¡ä»¥åŠåœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸‹æ‰§è¡Œ</li>
</ul>

<p>å¼‚æ­¥æ‰€é€ æˆçš„é—®é¢˜å°±æ˜¯ï¼Œæ•°æ®ä¼šè¢«å¾ˆå¤šæºæ“ä½œã€‚æ¯”å¦‚ä½ å¾ªç¯æ‰“å°ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œé‚£ä½ æ‰“å°å‡ºæ¥çš„arrayä¸€å®šæ˜¯ä½ ä¼ å…¥çš„arrayï¼Œé‚£å¦‚æœæˆ‘æ¯ç‚¹å‡»ä¸€ä¸‹æŒ‰é’®æ‰“å°ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä½ ç‚¹ç¬¬äº”ä¸‹çš„æ—¶å€™ï¼Œå¯èƒ½æ•°ç»„çš„ç¬¬äº”ä¸ªå…ƒç´ éƒ½è¢«æ›¿æ¢ç”šè‡³åˆ é™¤äº†ã€‚</p>

<p>å¦å¤–ï¼ŒUIçš„åˆ·æ–°å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œæˆ‘ä»¬å¾ˆå¤šæ—¶å€™ä¼šå¿½ç•¥è¿™ä¸ªé—®é¢˜ï¼Œæœ‰çš„æ—¶å€™tableViewåˆ·æ–°ï¼Œæ§ä»¶çš„ä½ç½®é”™ä¹±ï¼Œå°±è¦çœ‹çœ‹æ˜¯ä¸æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„åˆ·æ–°æ–¹æ³•äº†ã€‚</p>

<h2 id="section-2">å¼‚æ­¥æœ¯è¯­</h2>
<p>### 1. State, and specifically, shared mutable state
Stateç›´ç™½æ¥çœ‹å°±æ˜¯çŠ¶æ€ã€‚å°±åƒä½ çš„ç”µè„‘ï¼Œä¹Ÿè®¸åˆšæ‰“å¼€çš„æ—¶å€™å¾ˆå¥½ç”¨ï¼Œç„¶è€Œå¼€äº†ä¸¤ä¸‰å¤©ä¹‹åå°±å¡äº†ã€‚ä½†æ˜¯ç¡¬ä»¶è¿˜æ˜¯é‚£æ ·ï¼Œè½¯ä»¶ä»£ç ä¹Ÿæ²¡æœ‰å˜ï¼Œå‘ç”Ÿå˜åŒ–äº†çš„å°±æ˜¯Stateã€‚</p>

<p>åœ¨å†…å­˜å’Œç¡¬ç›˜ä¸­çš„æ•°æ®ï¼Œå¯¹ç”¨æˆ·è¾“å…¥çš„åé¦ˆï¼Œä»æœåŠ¡å™¨ä¸‹è½½å†…å®¹ç•™å­˜ä¸‹çš„ç—•è¿¹â€“æ‰€æœ‰çš„è¿™äº›å°±ç»„æˆäº†ç”µè„‘çš„Stateã€‚</p>

<p>å¤„ç†æˆ‘ä»¬appçš„Stateï¼Œç‰¹åˆ«æ˜¯é‚£äº›å½“éœ€è¦åœ¨å¤šä¸ªå¼‚æ­¥ç»„ä»¶ä¸­å…±äº«çš„æ—¶å€™ï¼ŒRxSwiftçš„ä»·å€¼å°±ä½“ç°å‡ºæ¥äº†ã€‚</p>

<h3 id="imperative-programming">2. Imperative programming</h3>
<p>å‘½ä»¤å¼ç¼–ç¨‹
<code class="highlighter-rouge">
override func viewDidAppear(_ animated: Bool) {
	super.viewDidAppear(animated)
	setupUI() 
	connectUIControls()
	createDataSource() 
	listenForChanges()
}
</code></p>

<p>å…¸å‹çš„å‘½ä»¤å¼ç¼–ç¨‹ï¼Œåœ¨æˆ‘çš„ä»£ç é‡Œå‡ ä¹éšå¤„å¯è§ï¼Œè¿™ç§æ–¹å¼ä»ä»£ç ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“ä»–åšäº†ä»€ä¹ˆã€‚æ˜¯å¦æ›´æ–°äº†ViewControllerçš„å±æ€§ï¼Ÿæœ€å…³é”®æ˜¯é—®é¢˜æ˜¯ï¼Œä»£ç æ˜¯ä¸æ˜¯å¿…é¡»æŒ‰ç…§è¿™ä¸ªé¡ºåºæ‰§è¡Œï¼Ÿé‚£å¦‚æœæˆ‘ä»¬è¦æ›´æ¢å…¶ä¸­ä¸¤ä¸ªæ–¹æ³•çš„ä½ç½®ï¼Œç»“æœä¼šç›¸åŒä¹ˆï¼Ÿå¦‚æœå’Œä½ æ­æ¡£çš„å¼€å‘åŒå­¦è¦åœ¨å¦ä¸€ä¸ªViewControllerä¸­ç”¨è¿™å…¶ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œä½ å¯¹å…¶æ²¡æœ‰ä»»ä½•çº¦æŸå’ŒæŒ‡å¯¼ï¼Œç”šè‡³è¿ä¿¡æ¯éƒ½ä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œè°¨æ…èµ·è§ï¼Œå°±ä¸€å®šè¦çœ‹é‡Œé¢çš„å®ç°ã€‚</p>

<h3 id="side-effects">3. Side effects</h3>
<blockquote>
  <p>Side effects are any change to the state outside of the current scope.</p>
</blockquote>

<p>å¾ˆç®€å•ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå°±åƒä¹‹å‰çš„ä»£ç ï¼ŒconnectUIControlsï¼Œçœ‹è¿™ä¸ªæ–¹æ³•åº”è¯¥æ˜¯åˆ·æ–°äº†UIç•Œé¢ï¼Œè¿™å°±æ˜¯è¿™ä¸€è¡Œä»£ç çš„side effectsã€‚æ”¹å˜å†…å­˜ä¸­çš„æ•°æ®ï¼Œåˆ·æ–°ç•Œé¢ä¸Šçš„labelï¼Œè¿™äº›éƒ½æ˜¯side effectsã€‚æˆ‘ä»¬çš„ä»£ç å°±æ˜¯è¦æ¥åˆ¶é€ è¿™äº›side effectsçš„ï¼Œæ‰€ä»¥ï¼Œå…³é”®åœ¨äºæ€ä¹ˆèƒ½ä¿è¯è¿™äº›side effectsæ˜¯å¯æ§åˆ¶çš„ã€‚é€ æˆçš„è¿™äº›å½±å“ï¼Œéƒ½å‡ºäºä½ çš„æœ¬æ„ã€‚</p>

<p>RxSwiftè¢«è®¾è®¡æ¥æ‰§è¡Œè¿™æ ·çš„äº‹æƒ…</p>

<h3 id="declarative-code">4. Declarative code</h3>
<blockquote>
  <p>Declarative code lets you define pieces of behavior, and RxSwift will run these behaviors any time thereâ€™s a relevant event and provide them an immutable, isolated data input to work with.</p>
</blockquote>

<p>å£°æ˜å¼çš„ä»£ç å¯ä»¥å®šä¹‰ä¸€ç§è¡Œä¸º(behavior)ï¼Œåªæœ‰æœ‰ç›¸å…³çš„äº‹ä»¶å‘ç”Ÿï¼ŒRxSwiftå°±ä¼šæ¥å—ä¸€ç»„ä¸å¯å˜ä¸”éš”ç¦»çš„æ•°æ®ï¼Œæ¥è¿è¡Œè¿™ä¸€æ®µä»£ç ã€‚</p>

<p>è¿™ç§æ•°æ®å½¢å¼ä½¿å¾—åœ¨å¹¶è¡Œç¯å¢ƒä¸‹ï¼Œæ•°æ®ä¸ä¼šç›¸äº’å½±å“ï¼Œè®¾è®¡é€»è¾‘çš„æ—¶å€™å°±å¯ä»¥ç®€å•å¤„ç†ï¼Œåœ¨æŸä»£ç å—ä¸­ï¼Œä»£ç ä¹Ÿä¼šé¡ºåºæ‰§è¡Œã€‚</p>

<ul>
  <li>immutable</li>
  <li>isolated</li>
</ul>

<h3 id="reactive-systems">5. Reactive systems</h3>
<p>Reactive systemsæˆ‘ä»¬ä¸€èˆ¬ç¿»è¯‘æˆå“åº”å¼ç³»ç»Ÿï¼Œç‰¹åˆ«æŠ½è±¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç§ç‰¹å¾</p>

<ul>
  <li>Responsive: æ€»æ˜¯è®©UIä¿æŒä¸æ•°æ®åŒæ­¥ï¼Œåæ˜ Appçš„æœ€æ–°çŠ¶æ€</li>
  <li>Resilient: å­—é¢æ„æ€æ˜¯æœ‰å¤åŸèƒ½åŠ›çš„ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸€æ®µæè¿°è¡Œä¸ºçš„ä¸šåŠ¡ä»£ç (Behavior)éƒ½æ˜¯ç›¸äº’éš”ç¦»å¹¶ä¸”å¯ä»¥ä»é”™è¯¯ä¸­æ¢å¤å¹¶ç»§ç»­æ‰§è¡Œã€‚</li>
  <li>Elastic: æœ‰å¼¹æ€§ï¼Œå¯ä¼¸ç¼©ã€‚å°±æ˜¯è¯´ä¸€ä¸²é“¾å¼è°ƒç”¨çš„ä»£ç å¤„ç†äº†å·¥ä½œæµä¸Šçš„å¾ˆå¤šéƒ¨åˆ†ï¼Œæ¯”å¦‚æ‹‰å–æ•°æ®ï¼Œå¤„ç†æ•°æ®ï¼Œæ§åˆ¶äº‹ä»¶ç­‰ç­‰ã€‚æ¯”å¦‚Worker.loadData.map.delay.shareTo.work</li>
  <li>Message driven: ç»„ä»¶ä¹‹é—´é€šè¿‡æ¶ˆæ¯æœºåˆ¶æ¥ä¼ é€’ä¿¡æ¯ï¼Œä»¥æé«˜éš”ç¦»æ€§å’Œå¯é‡ç”¨æ€§ï¼Œä»ç”Ÿå‘½å‘¨æœŸå’Œå…·ä½“çš„ç±»å®ç°ä¸­è§£è€¦ï¼ˆTODO: å…·ä½“æ€ä¹ˆè®²å‘¢ï¼‰</li>
</ul>

<h2 id="rxswift-1">RxSwiftçš„ç»„æˆåŸºç¡€</h2>
<p>å“åº”æ€§ç¼–ç¨‹å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µå·²ç»å­˜åœ¨äº†å¾ˆé•¿æ—¶é—´äº†ã€‚ä½†æ˜¯ä»–çš„æ ¸å¿ƒæ€æƒ³åœ¨æœ€è¿‘åå¹´åˆæµè¡Œèµ·æ¥ã€‚è¿˜æœ‰ä¸€å¤§æ®µå†å²ï¼Œå§‹äºå¾®è½¯Rx.NETï¼Œç„¶åå‘å±•å‡ºäº†RxJSï¼ŒRxKotlinï¼ŒRxScalaä»¥åŠæˆ‘ä»¬è®¨è®ºçš„RxSwiftã€‚</p>

<blockquote>
  <p>RxSwift finds the sweet spot between traditionally imperative Cocoa code and purist functional code. It allows you to react to events by using immutable code definitions to process asynchronously pieces of input in a deterministic, composable way.</p>
</blockquote>

<p>RxSwiftæœ‰ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œ<strong>observables</strong>ï¼Œ<strong>operators</strong>ä»¥åŠ<strong>schedulers</strong>ã€‚</p>

<h3 id="observables">Observables</h3>
<p>Observable<T>è¿™ä¸ªç±»ç»™Rxæä¾›äº†åŸºç¡€åŠŸèƒ½ï¼Œå¯ä»¥å¼‚æ­¥äº§ç”Ÿä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—ï¼Œæºå¸¦ç€Tç±»å‹æ•°æ®çš„ä¸€ä»½å¿«ç…§(*â€œcarryâ€ an immutable snapshot of data T*)ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®©ä¸€ä¸ªç±»å¯ä»¥è®¢é˜…å¦ä¸€ä¸ªç±»å‘å°„å‡ºæ¥çš„æ•°æ®ã€‚</T></p>

<p>Observable<T>å¯ä»¥è®©å¤šä¸ªè§‚å¯Ÿè€…å®æ—¶è®¢é˜…åˆ°äº‹ä»¶ä»¥æ›´æ–°UIç•Œé¢ã€‚</T></p>

<p>ObservableType <strong><em>protocol</em></strong> (to which the Observable<T> conforms)éå¸¸ç®€å•ã€‚Observableä»…ä»…å¯ä»¥å‘å°„ä¸‰ç§eventï¼Œå½“ç„¶observersä¹Ÿä»…ä»…å¯ä»¥æ”¶åˆ°è¿™ä¸‰ç§event</T></p>

<ul>
  <li><strong>A <em>next</em> event:</strong> è¿™ä¸ªäº‹ä»¶å¸¦ç€æœ€æ–°çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¿™äº›è§‚å¯Ÿè€…ï¼ˆobserversï¼‰å¯ä»¥æ”¶åˆ°çš„å€¼</li>
  <li><strong>A <em>completed</em> event:</strong> è¿™ä¸ªäº‹ä»¶ä¼šç»“æŸäº‹ä»¶é˜Ÿåˆ—ï¼Œå¹¶ä¸”ä»£è¡¨æˆåŠŸç»“æŸã€‚è¿™æ„å‘³ç€Observableæ­£å¸¸é€€å‡ºç”Ÿå‘½å‘¨æœŸå¹¶ä¸”ä¸ä¼šå†å‘å°„ä»»ä½•å…¶ä»–çš„äº‹ä»¶äº†ã€‚</li>
  <li><strong>An <em>error</em> event:</strong> åŒæ ·ä¼šç»“æŸé˜Ÿåˆ—ï¼Œåªä¸è¿‡æ˜¯å¼‚å¸¸é€€å‡ºï¼Œä¹Ÿä¸ä¼šå†å‘é€äº‹ä»¶äº†ã€‚</li>
</ul>

<p>observable sequencesæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æœ‰é™çš„ã€‚æ¯”å¦‚ä¸‹è½½æ–‡ä»¶ï¼Œä¸‹è½½è¿™ç§åŠ¨ä½œæ€»å½’ä¼šåœæ­¢ï¼ŒæˆåŠŸæˆ–è€…å¤±è´¥ï¼Œå°±ç®—æ˜¯æ²¡æœ‰å“åº”ä¹Ÿåº”è¯¥ä¼šè¶…æ—¶ã€‚è€Œå¦å¤–ä¸€äº›è§‚å¯Ÿé˜Ÿåˆ—ï¼Œä¸åƒä¸‹è½½è¿™ç§ä¼šè‡ªç„¶çš„æˆ–è€…å¼ºåˆ¶çš„é€€å‡ºï¼Œè¿™äº›é˜Ÿåˆ—ä¼šä¸€ç›´ç›‘å¬ï¼Œæ¯”å¦‚è®¾å¤‡æ˜¯æ¨ªå±è¿˜æ˜¯ç«–å±ï¼Œå½“æˆ‘ä»¬è®¢é˜…äº†è¿™ä¸ªDevice.Observableçš„è¿™ä¸ªäº‹ä»¶ä¹‹åï¼Œæ¯å½“æˆ‘ä»¬æ—‹è½¬å±å¹•çš„æ—¶å€™ï¼Œéƒ½ä¼šå—åˆ°next eventï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šæœ‰<em>completed</em>æˆ–è€…<em>error</em>ã€‚</p>

<h3 id="operators">Operators</h3>
<p><em>ObservableType</em>å’Œ<em>Observable</em>ç±»çš„å®ç°ï¼ŒåŒ…å«äº†å¾ˆå¤šå°†å¼‚æ­¥å·¥ä½œåˆ†ç¦»æˆä¸€ç‰‡ç‰‡çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ç»„åˆè¿™äº›æ–¹æ³•æ¥å®Œæˆä¸€ä¸ªå¤æ‚é€»è¾‘ã€‚å› ä¸ºè¿™äº›<em>Operator</em>ç»å¤§éƒ¨åˆ†éƒ½ä¸äº§ç”Ÿ<em>side effects</em>ï¼Œæ‰€ä»¥ä»–ä»¬å¯ä»¥å¾ˆå®¹æ˜“æ‹¼æ¥åœ¨ä¸€èµ·ã€‚</p>

<p>å°±åƒï¼ˆ1 + 2ï¼‰* 3 - 20ä¸€æ ·ï¼Œä½ å¯ä»¥é€šè¿‡ç»„åˆæ“ä½œç¬¦æ¥å®Œæˆæ›´åŠ å¤æ‚çš„è¿ç®—ã€‚
<code class="highlighter-rouge">
UIDevice.rx.orientation
  .filter { value in 
    return value != .landscape 
  }
  .map { _ in
    return "Portrait is the best!" 
  } 
  .subscribe(onNext: { string in
    showAlert(text: string) 
  })
</code></p>

<p><em>operators</em>é«˜åº¦ç»„ä»¶åŒ–ï¼ˆcomposableï¼Œå¯ä»¥ç»„åˆï¼‰ï¼Œæ€»æ˜¯æ¥å—è¾“å…¥ï¼Œå¤„ç†åè¾“å‡ºï¼Œæ‰€ä»¥ä½ å¯ä»¥ç®€å•çš„æŠŠå®ƒä»¬é“¾åœ¨ä¸€èµ·ã€‚è¿™ç§é“¾å¼ç¼–ç¨‹è¡¨æ„æ˜ç¡®ï¼Œå¹¶ä¸”é€šè¿‡ç»„åˆä¸åŒçš„<em>operators</em>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°éå¸¸å¤šåŠŸèƒ½ã€‚ï¼ˆVery HandyğŸ¤—ï¼‰</p>

<h3 id="schedulers">Schedulers</h3>
<p>Schedulerså°±æ˜¯Rxé‡Œé¢çš„<strong>dispatch queues</strong>ï¼Œæ›´å¼ºåŠ›ï¼Œå¹¶ä¸”ç”¨èµ·æ¥æ›´ç®€å•ã€‚åŸºç¡€ç”¨æ³•ï¼Œæ¯”å¦‚ç›‘å¬æ•°æ®å˜åŒ–ï¼Œæ›´æ–°UIå…¶å®éƒ½ä¸ä¼šè¿‡å¤šçš„æ¥è§¦åˆ°Schedulerï¼Œè¿™ä¹Ÿè¡¨æ˜Schedulersä¸ºé«˜é˜¶ç”¨æ³•ï¼Œæ¯”è¾ƒå¼ºå¤§ã€‚</p>

<p>æ¯”å¦‚ä½ å¯ä»¥æŒ‡å®šï¼Œåœ¨ä¸€ä¸ª<strong>SerialDispatchQueueScheduler</strong>ä¸Šç›‘å¬<em>next</em>äº‹ä»¶ï¼Œè¿™ä¼šä½¿ç”¨<strong>Grand Central Dispatch</strong>å»é¡ºåºæ‰§è¡Œä½ ç»™å®šçš„é˜Ÿåˆ—ã€‚<strong>ConcurrentDispatchQueueScheduler</strong>æ˜¯å¹¶è¡Œé˜Ÿåˆ—ï¼Œ<strong>OperationQueueScheduler</strong>å¯ä»¥è®©ä½ æŒ‡å®šé˜Ÿåˆ—ã€‚</p>

<blockquote>
  <p>Thanks to RxSwift, you can schedule the different pieces of work of the same subscription on different schedulers to achieve the best performance.</p>
</blockquote>

<p>RxSwiftå¯ä»¥åœ¨<strong>subscriptions</strong>å’Œ<strong>schedulers</strong>ç›´æ¥æ‰®æ¼”ä¸­é—´åˆ†é…å™¨çš„è§’è‰²(<strong>dispatcher</strong>)ï¼Œå°†ä»»åŠ¡åˆ†é…åˆ°æ­£ç¡®çš„ç¯å¢ƒä¸­å¹¶ä¸”æ— ç¼é…åˆèµ·æ¥ã€‚</p>

<p><img src="/img/in-post/post-RxSwift/RxSwift_01.png" alt="java-javascript" /></p>

<h2 id="app-architecture">App architecture</h2>
<p>RxSwiftå¹¶ä¸ä¼šå½±å“ä½ çš„æ¶æ„ï¼Œä»–å¤§å¤šæ•°æƒ…å†µä¸‹åªæ˜¯å¤„ç†äº‹ä»¶(<strong>event</strong>)ï¼Œå¼‚æ­¥æ•°æ®é˜Ÿåˆ—(<strong>asynchronous data sequences</strong>)ï¼Œä»¥åŠå…¨å±€çš„é€šä¿¡é“¾æ¥(<strong>universal communication contract</strong>)ã€‚ä½ å¯ä»¥ä»»æ„é€‰æ‹©MVCï¼ŒMVPï¼ŒMVVMã€‚</p>

<p>å¹¶ä¸”RxSwiftå¹¶ä¸éœ€è¦é¡¶å±‚è®¾è®¡ï¼Œåœ¨ä½ é‡åˆ°éœ€è¦çš„åœºæ™¯æ—¶ï¼Œç”¨Rxçš„æ–¹æ³•å¤„ç†ä¸šåŠ¡é€»è¾‘å°±è¡Œï¼Œæ‰€ä»¥æ˜¯æ¸è¿›çš„ã€‚</p>

<p>è™½ç„¶å¹¶ä¸ç»‘å®šæ¶æ„ï¼Œä½†æ˜¯å¾®è½¯è®¾è®¡çš„MVVMæ¶æ„ä¸“é—¨ä¸ºæ•°æ®é©±åŠ¨çš„è½¯ä»¶å†™æ³•æä¾›æ•°æ®ç»‘å®šã€‚RxSwiftå’ŒMVVMåœ¨ä¸€èµ·å¯ä»¥é…åˆçš„å¾ˆå¥½ã€‚ä¹‹æ‰€ä»¥é…åˆæ¯”è¾ƒå¥½ï¼Œæ˜¯å› ä¸ºViewModelå…è®¸ä½ æš´éœ²Observable<T>çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ç”¨èƒ¶æ°´ä»£ç åœ¨View Controllerä¸­ç›´æ¥ç»‘å®šåˆ°UIæ§ä»¶ä¸Šã€‚</T></p>

<p><img src="/img/in-post/post-RxSwift/RxSwift_02.png" alt="java-javascript" /></p>

<h2 id="rxcocoacommunity">RxCocoaå’ŒCommunity</h2>
<p>RxCocoaç»™å¾ˆå¤šUIæ§ä»¶æ·»åŠ äº†reactiveæ‰©å±•ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¢é˜…å¾ˆå¤šUIäº‹ä»¶äº†ã€‚</p>

<p>Communityå°±æ˜¯ç¤¾åŒºï¼Œæœ‰å¾ˆå¤šæ‰©å±•çš„ä»£ç å’ŒReactæ§ä»¶ï¼Œæ–¹ä¾¿å¥½ç”¨<a href="http://community.rxswift.org">RxSwift Community Projects</a></p>



                <hr>

                


                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/09/22/js-version/" data-toggle="tooltip" data-placement="top" title="Example Post">&larr; Previous Post</a>
                    </li>
                    
                    
                </ul>


                

                

            </div>

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#å‰ç«¯å¼€å‘" title="å‰ç«¯å¼€å‘" rel="3">
                                    å‰ç«¯å¼€å‘
                                </a>
                            
        				
                            
                				<a href="/tags/#JavaScript" title="JavaScript" rel="3">
                                    JavaScript
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
        			</div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">
                    
                        <li><a href="http://huangxuan.me">Hux Blog</a></li>
                    
                        <li><a href="#">Foo</a></li>
                    
                        <li><a href="#">Bar</a></li>
                    
                        <li><a href="#">Example Friends</a></li>
                    
                        <li><a href="#">It helps SEO</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>








<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("http://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    

                    <!-- add Weibo, Zhihu by Hux, add target = "_blank" to <a> by Hux -->
                    
                    
                    <li>
                        <a target="_blank" href="http://weibo.com/RobertYeYu">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    


                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/RobertYeYu">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Shit Happens 2017
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("http://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-49627206-1';
    var _gaDomain = 'huangxuan.me';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>



<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = '4cc1f2d8f3067386cc5cdb626a202900';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>




<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
